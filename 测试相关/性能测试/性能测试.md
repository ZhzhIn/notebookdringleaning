###
性能分析方法：USE方法
USE: utilization利用率（CPU,MEM,磁盘IO），saturation饱和度，error错误
###
###

### 存储监控及分析
- 监控服务器的可用存储空间
- 监控应用日志文件对应存储空间
- 监控数据库存储空间和表空间
- 分析性能测试执行过程中，存储空间的变化趋势
- 磁盘读写I/O

问题和排查：
Q: 数据库服务器磁盘缓慢
A：   
    - 当前是否存在数据库性能问题，如何度量它  
    - 问题出现至今多长时间了  
    - 最近数据库有任何变动吗  
    - 为什么怀疑是磁盘  
Q：  
    - 日志显示查询延时1000ms+  
    - 近一周这类查询数目达到了每小时几十个  
    - AcmeMon显示磁盘在那段时间很繁忙  
A:  
    初步判定：存在问题，需要检查磁盘，一级其他资源。
    - 磁盘使用率在过去一周稳步上升，其他的都平滑  
    - 使用use方法，查看饱和度和error
    - 磁盘饱和度常常达到100%，加大了延时。  
    - 磁盘饱和导致数据库延时是否存在强关联？延时相对于数据库的查询不是异步的，则强关联。  
    - 即查询磁盘饱和和数据库查询是同步，则强关联
    - 利用动态跟踪脚本来捕捉时间戳和每次数据库被内核取消调度时的数据库的栈跟踪。
      发现数据库在查询过程中常常被一个文件系统读操作阻塞，一阻塞就是好几毫秒。  
    - 为什么会发生这个问题： 1.数据库为什么被阻塞，2.磁盘为什么负载过高
    - 磁盘负载过高：对负载进行特征归纳，使用iostat 来测量IOPS、吞吐量、平均磁盘IO延时和读写比。
      通过上述，计算出平均IO大小并对访问模式做了估计：随机或者连续。
      发现是磁盘高负载问题，不是磁盘本身的问题。
      磁盘处于高负载，从而使得IO延时增加，进而延缓查询。
    - 是否是数据库的负载增加了
Q：  
    - 没有，且数据库查询率始终持平。  
A：  
    - 是否是
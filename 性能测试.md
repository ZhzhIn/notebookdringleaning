性能调优：
    主要关注测试过程中各种可能的性能制约点（比如磁盘IO，网络拥塞状况，服务器mem使用情况，数据库使用情况等），通过对参数调整后的系统进行反复测试来找到制约性能的因素
性能验证：
    重点关注是否能达到性能指标要求，重点集中在用户体验上。
指标：
    响应时间，最大并发用户数
监控内容：
    1.监控系统状态，服务器资源状况，CPU/硬盘/内存，系统硬件，主要软件（数据库）
    
压力测试：在高压下服务器的表现情况（主要看线上的流量，服务器是否承受的住，比如10w客户来访问，系统的压力表现情况）
负载测试：服务器承载的边界（主要是找到系统处理能力的极限：包括web影响响应时间，CPU利用率等等。比如，系统最多运训10000个并发用户访问，1min内最多处理10w此对数据库的修改等）
并发测试：并发下服务器的表现（并发操作下系统是否存在缺陷，资源争用，死锁，内存泄漏等)
耐久性测试：在运行时间变长后，一些资源无法释放导致变慢，比如内存泄漏，数据库连接池满，数据结构不见装等。一般关注CPU，可用mem，mem使用百分比等。
瞬时测试：用户突增的情况下的测试。
失败恢复测试：应用故障时的持续性

###数据分析
linux性能关注工具：
vmstat,top,sysstat,sar,iostat……
内存泄漏：
    handle count 句柄数量
    Thread count 线程数量
    virtual bytes 虚拟内存字节数
    Woriking set 当前进程有管的那一部分物理内存
    private bytes 进程分配的私有数据字节数量
    一般情况下，虚拟内存>working set ，否则内存泄漏。或停止后，workingset 仍保留在高位，也存在内存泄漏。
    
  
    

内存瓶颈判定：
    1.mem: 机器本身的内存瓶颈
    2.process：程序所侵占的内存瓶颈
    3.I/O： 与内存瓶颈被动相关
cpu数据+磁盘数据分析：
    请查阅linux命令-top部分笔记
数据库性能分析：
    1.page splits/sec 每秒分页次数，>100较大，使磁盘IO变大，搜索变慢，性能变差
    2.batch requests/sec 每秒批次请求数量，>1k~5k较大，影响网卡性能
    3.user Connections 用户连接数
    4.num of deadlocks/sec 每秒思索数量
    5.average wait time(ms) 平均所等待时间，时间较长可导致用户提交数据更改时需要长时间才能完成，对于100w数据的表，>500ms的锁等待时间视为较大
    6.full scan/sec 每秒全表便利次数，对于查询，最好使用索引。

###性能测试方案
    1.参与人员和职责：后端负责人，运维，测试，关联服务方项目组
    2.圈定测试内容：接口或RPC服务的范围
    3.被测内容线上流量预期压力，计算出加压数值范围
    4.列出判断影响性能的因素，并根据因素来制定隔离和对比数据，通过调整一个因素的数值，其他因素固定，获取纵向数据。
    因素如：用户数量，服务器性能，网络带宽，客户端软件配置，中间件配置，数据库配置等
    5.测试环境准备，考量测试环境和生产环境的数据差异对结果的影响
    6.通知协作单位，准备好脚本和预期数据和期望结果
    7.调整性能监控设置，保证测试执行后的数据采集准确
    
###性能测试报告
    1.有效总结测试数据：测试数据总结在文档的某一部分，将支持结论的数据列出，并说明每个数值代表含义，且列出获取数据的方法
    2.测试数据与图表结合。
###优化方案
    数据库：
    见数据库相关
    cache:
    cpu中的cache芯片，用于缓和寄存器和内存读写速度的差异，数据存放在cache中，下一条指令就不必再去内存。从而提高性能。
    服务调用过程中的cache也是类似，用于缓和内存和磁盘读写速度的差异，使硬盘上频繁访问的数据在内存中找到，减少读写硬盘的时间。
    
        
    
